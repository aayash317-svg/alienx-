> **Role & Context**
> You are a senior full-stack engineer and system architect.
> You are working on an existing Flask-based project called **NFC Health ID System**.
> The system already has:
>
> * Flask backend
> * SQLite database
> * JWT authentication
> * Role-based access (patient, hospital, insurance, admin)
> * Encrypted patient ID
> * QR code + NFC support
> * Clean separation of UI routes (`app.py`) and API routes (`api.py`)
>
> **IMPORTANT RULES (DO NOT BREAK THESE):**
>
> 1. Do NOT rewrite the whole project
> 2. Do NOT remove existing working features
> 3. Do NOT change database tables unless strictly required
> 4. Follow the existing `/api/*` routing pattern
> 5. Hospital must NEVER be able to modify or delete old medical records
> 6. All new features must be incremental and backward-compatible
> 7. Use Flask, SQLite, HTML, CSS, and JavaScript only (no framework migration)
>
> ---
>
> ## ðŸŽ¯ OBJECTIVE
>
> Extend and redesign the **Hospital Interface & Flow** with the following new features and rules.
>
> ---
>
> ## ðŸ¥ HOSPITAL AUTHENTICATION FLOW
>
> ### 1. Hospital Sign-Up & Login
>
> * New hospitals must **register first** using:
>
>   * Hospital name
>   * Medical council registration ID (unique)
>   * Hospital email
>   * Password
> * Already registered hospitals must **login using medical council registration ID + password**
> * Prevent duplicate hospital registrations using the same council ID
>
> ---
>
> ## ðŸ§­ POST-LOGIN DASHBOARD (HOSPITAL HOME)
>
> After successful login, redirect hospital to a dashboard containing **TWO LARGE BLOCKS**:
>
> ### Block 1: Hospital Profile
>
> * Opens hospital profile page
> * Shows:
>
>   * Hospital name
>   * Council registration ID
>   * Email
>   * Account status
>
> ### Block 2: Patient Access
>
> * Opens a page with:
>
>   * QR code scanning option (camera input)
>   * NFC tap option (future-ready, simulate for now)
> * Scanning / tapping must:
>
>   * Extract encrypted patient ID
>   * Redirect to patient medical database
>
> ---
>
> ## ðŸ‘¤ PATIENT MEDICAL RECORD ACCESS (HOSPITAL VIEW)
>
> * Hospital can **view all previous medical records**
> * Records must be displayed chronologically
> * Each record must show:
>
>   * Added by (hospital ID)
>   * Date & time
>   * File type (text / image / pdf / scan)
>
> âŒ Hospital must NOT be able to edit or delete ANY existing medical record
> âŒ Even records created by the same hospital must become immutable after logout
>
> ---
>
> ## âž• ADD MEDICAL DATA FLOW
>
> When hospital clicks **â€œAdd Medical Dataâ€**:
>
> * Open a new page containing a **structured data entry table**
> * Allow uploading:
>
>   * Text notes
>   * PDF files
>   * Images
>   * Scan reports
>   * Overall medical report summary
> * Each upload must:
>
>   * Be tagged with hospital ID
>   * Be linked to the patient ID
>   * Be time-stamped
>
> ---
>
> ## ðŸ’¾ SAVE & SESSION RULES
>
> * Hospital must click **Save** to store the new data
> * After saving:
>
>   * Data becomes **read-only forever**
>   * Hospital session must be logged out automatically
> * Even if the same hospital logs in again for the same patient:
>
>   * It may ADD new data
>   * It may NEVER delete or modify previous entries
>
> ---
>
> ## ðŸ” SECURITY & DATA INTEGRITY RULES
>
> * Enforce immutability at **backend level**, not frontend only
> * Every medical record must store:
>
>   * Hospital ID
>   * Patient ID
>   * Timestamp
> * Deletion APIs must NOT exist for hospital role
>
> ---
>
> ## ðŸ§± EXPECTED OUTPUT FROM YOU (ANTI-GRAVITY)
>
> 1. Updated database schema (only if required, explain why)
> 2. New or updated API endpoints for:
>
>    * Hospital signup
>    * Hospital login
>    * Patient record access
>    * Medical data upload
> 3. Backend logic enforcing **no-delete & no-edit rule**
> 4. HTML templates for:
>
>    * Hospital dashboard
>    * Hospital profile
>    * Patient access page
>    * Add medical data page
> 5. Minimal, clean CSS & JS (no frameworks)
> 6. Explanation of how data immutability is guaranteed
>
> ---
>
> **FINAL INSTRUCTION:**
> Implement these changes incrementally, preserving all existing functionality.
> Do not output unnecessary explanations.
> Provide clean, production-quality code blocks with clear file separation.

---
